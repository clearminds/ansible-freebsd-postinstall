---

- name: Configure hostname in /etc/rc.conf
  lineinfile: >
    dest="/etc/rc.conf"
    regexp="{{ item.regexp }}"
    line="{{ item.line }}"
    backup="yes"
  with_items:
    - { regexp: "^hostname",  line: "hostname=\"{{rc_conf_hostname}}\""}
  notify: set hostname
  tags: freebsd_postinstall_rc_conf_hostname

# DO overwrites hostname from rc.conf
- name: Configure hostname in /etc/rc.digitalocean.d/droplet.conf
  lineinfile: >
    dest="/etc/rc.digitalocean.d/droplet.conf"
    regexp="{{ item.regexp }}"
    line="{{ item.line }}"
    backup="yes"
  with_items:
    - { regexp: "^hostname",  line: "hostname=\"{{rc_conf_hostname}}\""}
  when: digitalocean == "yes"
  tags:
    - freebsd_postinstall_rc_conf_hostname_digitalocean
    - freebsd_postinstall_rc_conf_hostname
